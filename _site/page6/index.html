<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Things I Should Know</title>
  <meta name="description" content="but somehow only just learnt">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://localhost:4000/page6/">
  <link rel="alternate" type="application/rss+xml" title="Things I Should Know" href="/feed.xml">
  
  
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">
    
    
    <a class="site-title" href="/">Things I Should Know</a>
  
    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
            <a class="page-link" href="/about/">About</a>
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
        </div>
      </nav>
    
  </div>
</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <!-- This loops through the paginated posts -->

  <h1><a href="/2017/08/02/unit-testing-mocha.html">Describing mocha tests properly</a></h1>
  <p class="author">
    <span class="date">2017-08-02 00:00:00 -0700</span>
  </p>
  <div class="content">
    <p>There’s more <a href="http://samwize.com/2014/02/08/a-guide-to-mochas-describe-it-and-setup-hooks/">here</a> 
on how to write good tests and set them up,
so I tried implementing them in practice on an example function.
The entire repo of tests described in this article is 
<a href="https://github.com/lkloh/javascriptPlayground/tree/master/mochaTestExample_aug2_2017">here</a>.</p>

<p>Given this javascript function to test:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">isLeapYear</span><span class="err">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">year</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="nb">Number</span><span class="p">.</span><span class="nx">isInteger</span><span class="p">(</span><span class="nx">year</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">year</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">))</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="nx">year</span> <span class="o">%</span> <span class="mi">4</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="nx">year</span> <span class="o">%</span> <span class="mi">100</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="nx">year</span> <span class="o">%</span> <span class="mi">400</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
					<span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
				<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
					<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
			<span class="p">}</span> 
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="k">throw</span> <span class="s1">'Year must be an integer &gt;= 0'</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<p>Good tests are descriptive english of what you expect the function to do:</p>
<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">assert</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'assert'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">typesOfYears</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'./typesOfYears'</span><span class="p">);</span>

<span class="nx">describe</span><span class="p">(</span><span class="s1">'isLeapYear'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">describe</span><span class="p">(</span><span class="s1">'for years divisible by 4'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
	  	<span class="nx">it</span><span class="p">(</span><span class="s1">'should return "true" when the year is not multiple of 100'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		  	<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">typesOfYears</span><span class="p">.</span><span class="nx">isLeapYear</span><span class="p">(</span><span class="mi">1996</span><span class="p">),</span> <span class="kc">true</span><span class="p">);</span>
		<span class="p">});</span>

		<span class="nx">it</span><span class="p">(</span><span class="s1">'should return "false" when the year is a multiple of 100, and not a multiple of 400'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		  	<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">typesOfYears</span><span class="p">.</span><span class="nx">isLeapYear</span><span class="p">(</span><span class="mi">1900</span><span class="p">),</span> <span class="kc">false</span><span class="p">);</span>
		<span class="p">});</span>

		<span class="nx">it</span><span class="p">(</span><span class="s1">'should return "true" when the year is a multiple of 400'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		  	<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">typesOfYears</span><span class="p">.</span><span class="nx">isLeapYear</span><span class="p">(</span><span class="mi">2000</span><span class="p">),</span> <span class="kc">true</span><span class="p">);</span>
		<span class="p">});</span>
	<span class="p">});</span>

	<span class="nx">describe</span><span class="p">(</span><span class="s1">'for years not divisible by 4'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
	  	<span class="nx">it</span><span class="p">(</span><span class="s1">'should return "false" when the year is not multiple of 100'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		  	<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">typesOfYears</span><span class="p">.</span><span class="nx">isLeapYear</span><span class="p">(</span><span class="mi">2001</span><span class="p">),</span> <span class="kc">false</span><span class="p">);</span>
		<span class="p">});</span>
	<span class="p">});</span>
<span class="p">});</span>
</code></pre>
</div>

<p>while bad tests focus too much on implementation details.</p>
<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">assert</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'assert'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">typesOfYears</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'./typesOfYears'</span><span class="p">);</span>

<span class="nx">describe</span><span class="p">(</span><span class="s1">'isLeapYear'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">it</span><span class="p">(</span><span class="s1">'(year % 4 == 0) and (year % 100 != 0) ==&gt; false'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
	  	<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">typesOfYears</span><span class="p">.</span><span class="nx">isLeapYear</span><span class="p">(</span><span class="mi">1996</span><span class="p">),</span> <span class="kc">true</span><span class="p">);</span>
	<span class="p">});</span>

	<span class="nx">it</span><span class="p">(</span><span class="s1">'(year % 400 != 0) ==&gt; false'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
	  	<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">typesOfYears</span><span class="p">.</span><span class="nx">isLeapYear</span><span class="p">(</span><span class="mi">1900</span><span class="p">),</span> <span class="kc">false</span><span class="p">);</span>
	<span class="p">});</span>

	<span class="nx">it</span><span class="p">(</span><span class="s1">'(year % 400 == 0) ==&gt; true'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
	  	<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">typesOfYears</span><span class="p">.</span><span class="nx">isLeapYear</span><span class="p">(</span><span class="mi">2000</span><span class="p">),</span> <span class="kc">true</span><span class="p">);</span>
	<span class="p">});</span>

	<span class="nx">it</span><span class="p">(</span><span class="s1">'(year % 4 != 0) ==&gt; false'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">typesOfYears</span><span class="p">.</span><span class="nx">isLeapYear</span><span class="p">(</span><span class="mi">2001</span><span class="p">),</span> <span class="kc">false</span><span class="p">);</span>		
	<span class="p">});</span>
<span class="p">});</span>
</code></pre>
</div>

<p>Its awfully easy to write bad tests that describe how the function is implemented,
because I’ve already written it once by the time I’ve got there.
Something to be careful about for the future.</p>


  </div>

  <h1><a href="/2017/08/01/chaining-booleans.html">Generic libraries that check whether a value is truthy are useless</a></h1>
  <p class="author">
    <span class="date">2017-08-01 00:00:00 -0700</span>
  </p>
  <div class="content">
    <p>Python’s <a href="https://docs.python.org/2/library/operator.html">operator library</a>
is useful when you want to pass in regular arithmetic operators
as an argument to another function.
I recently had to use it.</p>

<p>In the process, I discovered there’s a handy function called as
<code class="highlighter-rouge">operator.truth(obj)</code> which takes in an object 
and returns <code class="highlighter-rouge">True</code> if the object is <code class="highlighter-rouge">True</code>, and <code class="highlighter-rouge">False</code> otherwise.
Meaning that <code class="highlighter-rouge">operator.truth(None) = False</code>, which is handy.</p>

<p>It would be handy if we could use it to 
verify that a variable which is supposed to hold an integers
is actually doing so, and isn’t something like <code class="highlighter-rouge">1/0</code>, for instance.</p>

<p>Unfortunately, we have:</p>
<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">operator</span>

<span class="n">not_an_integer</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s">'nan'</span><span class="p">)</span>
<span class="n">operator</span><span class="o">.</span><span class="n">truth</span><span class="p">(</span><span class="n">not_an_integer</span><span class="p">)</span> <span class="o">=</span> <span class="bp">True</span>
</code></pre>
</div>

<p>So not so helpful. There’s lots of libraries to check whether
something is truthy lying around, but their edge cases differ in subtle ways
and you end up needing to implement it again.</p>

<p>One place where this could come in useful is when
we have a variable <code class="highlighter-rouge">x</code> to handle where <code class="highlighter-rouge">x</code> could be <code class="highlighter-rouge">None</code>, or
a valid value, such as a non-empty string.
Unfortunately, we could just as easily check whether <code class="highlighter-rouge">x is None</code> or not.
It’s just easier this way.</p>

<p>I tried coding up <a href="https://github.com/lkloh/playground-for-python/blob/master/operator_library.py">an example</a> using <code class="highlighter-rouge">operator.truth</code> to check for null values,
and it didn’t work.
I still needed a specific case where I exlicitly checked 
whether a value was <code class="highlighter-rouge">None</code> or a <code class="highlighter-rouge">boolean</code>.</p>

<p>This example is simple:
create a dictionary with some fields describing a person,
and pass it into a function to transform all non-null fields of the dictionary into a string.
We use booleans to represent the gender of the person:
<code class="highlighter-rouge">True</code> for male and <code class="highlighter-rouge">False</code> for female,
I couldn’t use <code class="highlighter-rouge">operator.truth</code> to test whether the value of the person’s
gender was recorded, or it would cause problems as
<code class="highlighter-rouge">operator.truth(None) = False</code> and <code class="highlighter-rouge">operator.truth(False) = False</code>.
So if the gender is <code class="highlighter-rouge">False</code>,
then we want to transform the new dictionary’s value to <code class="highlighter-rouge">female</code>,
but this would not get processed.</p>

<p>Of course, this could be solved with refactoring in the example provided,
but if I refactored everything I didn’t like, I’ll never get anything done.</p>


  </div>

  <h1><a href="/2017/07/28/python-inlining.html">Python inlining</a></h1>
  <p class="author">
    <span class="date">2017-07-28 00:00:00 -0700</span>
  </p>
  <div class="content">
    <p>Python inlining makes code more readable. 
Especially code read by many people for a complex application.</p>

<p>Therefore a function like</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">return_even_numbers_only</span><span class="p">(</span><span class="n">arr_of_nums</span><span class="p">):</span>
	<span class="n">even_numbers</span> <span class="o">=</span> <span class="p">[]</span>
	<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">arr_of_nums</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
			<span class="n">even_numbers</span> <span class="o">+=</span> <span class="p">[</span><span class="n">n</span><span class="p">]</span>
	<span class="k">return</span> <span class="n">even_numbers</span>
</code></pre>
</div>

<p>should be refactored to</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">return_even_numbers_only</span><span class="p">(</span><span class="n">arr_of_nums</span><span class="p">):</span>
	<span class="k">return</span> <span class="p">[</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">arr_of_nums</span> <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span>
</code></pre>
</div>

<p>Similarly, if-else statements should be inlined if possible.</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">is_even</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
	<span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
		<span class="k">return</span> <span class="bp">True</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="k">return</span> <span class="bp">False</span>
</code></pre>
</div>

<p>should be refactored to</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">is_even</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
	<span class="k">return</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="k">return</span> <span class="bp">False</span>
</code></pre>
</div>

<p>Also, even for larger blocks of code, use fewer conditionals if possible.</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">get_fibonacci_number</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
	<span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
		<span class="k">return</span> <span class="mi">1</span>
	<span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
		<span class="k">return</span> <span class="mi">1</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">get_fibonacci_number</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">get_fibonacci_number</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span>
</code></pre>
</div>

<p>could be rewritten as</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">get_fibonacci_number</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
	<span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
		<span class="k">return</span> <span class="mi">1</span>
	<span class="k">return</span> <span class="n">get_fibonacci_number</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">get_fibonacci_number</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span>
</code></pre>
</div>


  </div>

  <h1><a href="/2017/07/27/writing-maintainable-code.html">Writing maintainable code</a></h1>
  <p class="author">
    <span class="date">2017-07-27 00:00:00 -0700</span>
  </p>
  <div class="content">
    <p>Best takeaways from the <a href="https://stackoverflow.com/questions/162805/writing-maintainable-code">community here</a>:</p>

<ul>
  <li>Write 5 lines of simple code that is easy to understand, 
  not esoteric code in one line that very few people know.
  Write code the way you would speak to a human being.</li>
  <li>Keep classes and methods small</li>
  <li>Refactor your code every so often</li>
  <li>DRY - Don’t repeat yourself</li>
  <li>Reach the library documentation carefully to see if you really need any type of function
  before writing your own</li>
  <li>Max #indents in a function should be 3 at worst.
    <div class="language-py highlighter-rouge"><pre class="highlight"><code>  <span class="c"># too many indents</span>
  <span class="k">if</span> <span class="n">is_human</span><span class="p">(</span><span class="n">living_being</span><span class="p">):</span>
      <span class="k">if</span> <span class="n">living_being</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'gender'</span><span class="p">)</span><span class="n">xs</span><span class="p">:</span>
          <span class="n">cut_hair_off</span><span class="p">(</span><span class="n">living_being</span><span class="p">)</span>
          <span class="k">if</span> <span class="n">living_being</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'emotion'</span><span class="p">)</span> <span class="o">==</span> <span class="s">'negative'</span><span class="p">:</span>
              <span class="k">if</span> <span class="n">living_being</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'heart_rate'</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
                  <span class="n">kill_it</span><span class="p">(</span><span class="n">living_being</span><span class="p">)</span>
              <span class="k">else</span><span class="p">:</span>
                  <span class="n">sell_it</span><span class="p">(</span><span class="n">living_being</span><span class="p">)</span>
          <span class="k">else</span><span class="p">:</span>
              <span class="n">kill_it</span><span class="p">(</span><span class="n">living_being</span><span class="p">)</span>
      <span class="k">else</span><span class="p">:</span>
          <span class="k">raise</span> <span class="s">"No gender provided"</span>
  <span class="k">else</span><span class="p">:</span>
      <span class="n">kill_it</span><span class="p">(</span><span class="n">living_being</span><span class="p">)</span>
</code></pre>
    </div>
  </li>
  <li>Be consistent with styles</li>
  <li>Have a dedicated method for each different task</li>
  <li>Automated unit tests - changing code is less risky</li>
  <li>Design before writing code. Talk to someone else first.</li>
  <li>Use linters</li>
  <li>Name things properly. Long names are fine. No abbreviations allowed.</li>
</ul>


  </div>

  <h1><a href="/2017/07/26/reviewing-a-pull-request.html">Reviewing a pull request</a></h1>
  <p class="author">
    <span class="date">2017-07-26 00:00:00 -0700</span>
  </p>
  <div class="content">
    <p>A pull request gives you a diff and list of files changed.
Here’s a <a href="http://blog.ploeh.dk/2015/01/15/10-tips-for-better-pull-requests/">guideline</a> 
for writine good pull requests,
and my summary</p>

<h2 id="what-a-reviewer-must-do">What a reviewer must do</h2>

<ul>
  <li>Understand the requirement the pull request is supposed to achieve</li>
  <li>How does it fulfil the requirement?</li>
  <li>Make sure its high quality - what does this mean?</li>
</ul>

<h2 id="how-to-write-a-good-pull-request">How to write a good pull request</h2>

<ul>
  <li>Make it small - easier to understand context and reason about it</li>
  <li>Do one thing - doing too many things may need multiple reviewers, some of which are on vacation now</li>
  <li>Short line width - &lt; 80 characters on a line if possible</li>
  <li>Make sure all tests pass - if it failed its probably your fault</li>
  <li>Add tests</li>
  <li>Make sure it builds</li>
  <li>Squash commits and force push if there are two many small commits that do very little
    <ul>
      <li>less complicated things to care about</li>
    </ul>
  </li>
  <li>Write useful descriptions and titles - give context about the goal of the pull request</li>
  <li>Have on-point commit messages - what changed and why, not how (it’s in the modified code already)</li>
  <li>Add comments to guide the reviewer</li>
  <li>Use good English and grammer. Check for typos.</li>
  <li>Add screenshots/videos for front-end changes - if its mostly styling changes, rope in the designer as well</li>
  <li>Think about security issues - any vulnerabilities.</li>
</ul>


  </div>

  <h1><a href="/2017/07/25/v8-bytecode.html">V8's bytecode</a></h1>
  <p class="author">
    <span class="date">2017-07-25 00:00:00 -0700</span>
  </p>
  <div class="content">
    <p><a href="https://medium.com/dailyjs/understanding-v8s-bytecode-317d46c94775">This post</a> 
tells us about V8’s bytecode. Here is a summary.</p>

<p>When V8 compiles JavaScript, this happens:</p>
<ul>
  <li>JS code == parser ==&gt; syntax tree</li>
  <li>syntax tree == interpreter ==&gt; bytecode</li>
  <li>bytecode == optimizing compiler ==&gt; optimized machine code</li>
</ul>

<h2 id="what-is-bytecode">What is bytecode</h2>

<ul>
  <li>An abstraction of machine code.</li>
  <li>Bytecode -&gt; machine code is easy: bytecode has the same model as CPU</li>
  <li>V8’s bytecodes are small building blocks of JavaScript’s functionality.
  There are bytecodes for operators like <code class="highlighter-rouge">add</code>, <code class="highlighter-rouge">TypeOf</code>, or <code class="highlighter-rouge">LdaNamedProperty</code>.</li>
</ul>

<h2 id="accumulator-register">Accumulator register</h2>

<ul>
  <li>Each bytecode specifies its inputs and outputs as register operands</li>
  <li>The interpreter for V8 USES <code class="highlighter-rouge">r0, r1, r2, ...</code> and an accumulator register.</li>
  <li>Accumulator register keeps bytecodes shorter and saves memory:
  <code class="highlighter-rouge">add r1</code> adds the value in register <code class="highlighter-rouge">r1</code> to the accumulator</li>
</ul>

<h2 id="looking-at-bytecode">Looking at bytecode</h2>

<p><code class="highlighter-rouge">node --print-bytecode &lt;my-filename&gt;.js</code></p>


  </div>

  <h1><a href="/2017/07/24/this-is-javascript.html">This is JavaScript</a></h1>
  <p class="author">
    <span class="date">2017-07-24 00:00:00 -0700</span>
  </p>
  <div class="content">
    <p><a href="https://blog.pragmatists.com/the-many-faces-of-this-in-javascript-5f8be40df52e">This</a> 
is a great post about <code class="highlighter-rouge">this</code>. Here is a summary.</p>

<p><code class="highlighter-rouge">this</code> is used in JavaScript similar to the way we use it in everyday life</p>
<ul>
  <li>when referring to something in context.
We say “The rent is expensive, this is really annoying”,
not “The rent is expensive. The expensive rent is really annoying”.
Knowing what context <code class="highlighter-rouge">this</code> helps us understand what is annoying.</li>
</ul>

<p>In JavaScript, <code class="highlighter-rouge">this</code> is used as a reference within a context.</p>

<h2 id="global-context">Global Context</h2>

<p>When someone says “This is annoying” without any context,
you’ll assume it refers to the latest situation. 
Perhaps that person is your roommate,
and they are referring to the fact that your landlord just
increased your rent yesterday. 
Or if that person is your parents,
they are referring to the fact that your younger sibling
crashed their car yesterday.</p>

<p>When using <code class="highlighter-rouge">this</code> in the browser,
you are referring to the global object - the window.
Thus</p>
<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">===</span> <span class="nb">window</span><span class="p">.</span><span class="nx">a</span><span class="p">);</span> <span class="c1">// true</span>
</code></pre>
</div>

<h2 id="function-context">Function context</h2>

<p>Function context is like a sentence context.
In the sentence “The rent is expensive, this is really annoying”,
the context for <code class="highlighter-rouge">this</code> is “the rent is expensive”.
In JavaScript, <code class="highlighter-rouge">this</code> refers to the function the object executes in.</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="nx">foo</span><span class="p">()</span> <span class="p">{</span>
	<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">a</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">foo</span><span class="p">()</span> <span class="o">===</span> <span class="nx">a</span><span class="p">);</span> <span class="c1">// true</span>
</code></pre>
</div>

<p>The function <code class="highlighter-rouge">foo</code> executes in the global context (window).</p>

<p>When a function is called as a method on an object, <code class="highlighter-rouge">this</code> is
set to the object the method is called on.</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
	<span class="na">method</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">};</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span> <span class="o">===</span> <span class="nb">window</span><span class="p">);</span> <span class="c1">// true</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">method</span><span class="p">()</span> <span class="o">===</span> <span class="nb">window</span><span class="p">);</span> <span class="c1">// false</span>
</code></pre>
</div>


  </div>

  <h1><a href="/2017/07/23/ways-to-enclose-strings.html">Enclosing strings in JavaScript</a></h1>
  <p class="author">
    <span class="date">2017-07-23 00:00:00 -0700</span>
  </p>
  <div class="content">
    <p>In JavaScript, you could use enclose a string in three ways:</p>
<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="s1">'abcd'</span>
<span class="s2">"abcd"</span>
<span class="err">`</span><span class="nx">abcd</span><span class="err">`</span>
</code></pre>
</div>

<p>In general, for ES5, you are encouraged to use double quotes. This is because</p>
<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"John's chair"</span><span class="p">);</span>
</code></pre>
</div>

<p>is easier to read and write than</p>
<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'John\'s chair'</span><span class="p">);</span>
</code></pre>
</div>

<p>In ES6, you could make this a template literal and write</p>
<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="err">`</span><span class="nx">John</span><span class="err">'</span><span class="nx">s</span> <span class="nx">chair</span><span class="err">`</span><span class="p">);</span>
</code></pre>
</div>

<p>Template strings let you compile expressions within the <code class="highlighter-rouge">${..}</code>, such as:</p>
<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">divResult</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nb">String</span><span class="p">(</span><span class="nx">a</span> <span class="o">/</span> <span class="nx">b</span><span class="p">);</span>
<span class="p">}</span>

<span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="err">`</span><span class="nx">Result</span> <span class="nx">of</span> <span class="mi">42</span> <span class="o">/</span> <span class="mi">7</span> <span class="nx">is</span> <span class="nx">$</span><span class="p">{</span><span class="nx">divResult</span><span class="p">(</span><span class="mi">42</span><span class="p">,</span> <span class="mi">7</span><span class="p">)}</span><span class="err">`</span><span class="p">;</span>
</code></pre>
</div>

<p>Another advantage of template strings is that you could make the string a multiline string:</p>
<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">introMe</span> <span class="o">=</span> 
	<span class="err">`</span><span class="nx">My</span> <span class="nx">name</span> <span class="nx">is</span> <span class="nx">Jane</span> <span class="nx">Smith</span><span class="p">.</span>
	<span class="nx">I</span> <span class="nx">am</span> <span class="mi">21</span> <span class="nx">years</span> <span class="nx">old</span><span class="p">.</span>
	<span class="nx">Reading</span> <span class="nx">books</span> <span class="nx">is</span> <span class="nx">my</span> <span class="nx">hobby</span><span class="p">.</span><span class="err">`</span><span class="p">;</span>
</code></pre>
</div>


  </div>

  <h1><a href="/2017/07/22/javascript-comparisons.html">Javascript: Use === and !==</a></h1>
  <p class="author">
    <span class="date">2017-07-22 00:00:00 -0700</span>
  </p>
  <div class="content">
    <p>Javascript has three ways to 
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness">establish equality</a>,
two of which are well known:</p>

<h2 id="a--b">A == B</h2>

<p>The best known, because it is used in lost of other languages.
Doesn’t work well for JavaScript because it
converts A and B to a common type, then compares them.
Meaning that these are all true:</p>
<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="mi">0</span> <span class="o">==</span> <span class="err">`</span><span class="mi">0</span><span class="err">`</span>
<span class="mi">0</span> <span class="o">==</span> <span class="mi">0</span>
<span class="kc">null</span> <span class="o">==</span> <span class="kc">undefined</span>
</code></pre>
</div>

<p>Since NaN represents the solution to an ill-behaved math problem (e.g. 1/0),
thus <code class="highlighter-rouge">NaN === NaN</code> returns false.</p>

<h2 id="a--b-1">A === B</h2>

<p>Compares objects A and B for strict equality.
Meaning for <code class="highlighter-rouge">true</code> to be emitted, the objects must be of the same type,
and also be the same. Thus these are false:</p>
<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="err">`</span><span class="mi">0</span><span class="err">`</span> <span class="o">===</span> <span class="mi">0</span>
<span class="kc">null</span> <span class="o">===</span> <span class="kc">undefined</span>
</code></pre>
</div>

<p>and only this is true:</p>
<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="mi">0</span> <span class="o">===</span> <span class="mi">0</span>
</code></pre>
</div>

<p>It’s considered good practice to use <code class="highlighter-rouge">===</code> equality, because:</p>
<ol>
  <li>Easier to predict the result of <code class="highlighter-rouge">A === B</code></li>
  <li>No type conversion is made, so faster evaluation</li>
</ol>

<h2 id="objectisa-b">Object.is(A, B)</h2>

<p>Almost the same behavior as <code class="highlighter-rouge">A === B</code>, except that <code class="highlighter-rouge">Object.is(NaN, NaN)</code> is true.</p>

<p>Generally use <code class="highlighter-rouge">A === B</code> instead of <code class="highlighter-rouge">Object.is(A, B)</code> as it the syntax that other
people would recognize and expect.</p>

<p>The only time you should use <code class="highlighter-rouge">Object.is</code> is if you want to mimic the way <code class="highlighter-rouge">Object.defineProperty()</code>
works for some reason, or when you want <code class="highlighter-rouge">Object.is(-0, +0)</code> to be false.</p>


  </div>

  <h1><a href="/2017/07/21/get-and-post-formatting.html">Get and Post formatting in Javascript</a></h1>
  <p class="author">
    <span class="date">2017-07-21 00:00:00 -0700</span>
  </p>
  <div class="content">
    <h2 id="get">Get</h2>

<p>Used for viewing data, all required data passed in the URL. Meaning that when sending parameters over, the URL in the request should look something like <code class="highlighter-rouge">http://example.com?name=jane&amp;age=21</code></p>

<h2 id="post">Post</h2>

<p>Used for altering data.
Additional data is sent in the body of the http request.
Since you should use JSON (language agnostic format) to send stuff over the network,
	and if your body is a Javascript object like
	<code class="highlighter-rouge">js
	const params = {
		name = `Jane`,
		age = 21,
	};
	</code>
	you’ll need to call <code class="highlighter-rouge">JSON.stringify(params)</code> to
	pass this over in the body of the post request.</p>


  </div>


<!-- Pagination links -->
<div class="pagination">
  
    <a href="/page5/" class="previous">Previous</a>
  
  <span class="page_number ">Page: 6 of 9</span>
  
    <a href="/page7/" class="next">Next</a>
  
</div>
      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Things I Should Know</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>
            
              LK Loh
            
            </li>
            
            <li><a href="mailto:lkloh2410@gmail.com">lkloh2410@gmail.com</a></li>
            
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/lkloh"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">lkloh</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/lkloh1024"><span class="icon icon--twitter"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">lkloh1024</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>but somehow only just learnt</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
