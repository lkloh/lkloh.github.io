<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Things I Should Know</title>
  <meta name="description" content="but somehow only just learnt">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://localhost:4000/blog/page4/">
  <link rel="alternate" type="application/rss+xml" title="Things I Should Know" href="/feed.xml">
  
  
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">
    
    
    <a class="site-title" href="/">Things I Should Know</a>
  
    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
            <a class="page-link" href="/about/">About</a>
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
        </div>
      </nav>
    
  </div>
</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <!-- This loops through the paginated posts -->

  <h1><a href="/2017/08/03/mocha-testing-interfaces.html">Different ways to write unit tests in Mocha</a></h1>
  <p class="author">
    <span class="date">2017-08-03 01:57:45 -0700</span>
  </p>
  <div class="content">
    <p>Continuing from the <a href="https://lkloh.github.io/2017/08/02/unit-testing-mocha.html">previous post</a> on unit testing in Mocha:
there are several types of <a href="https://mochajs.org/#interfaces">Mocha interfaces</a>
to chose from.</p>

<h2 id="bdd-behavior-driven-development">BDD (Behavior-driven development)</h2>

<p>Apparently this is the recommended one,
because it lets you specify the desired behavior
and not implementation details,
as there may be many different solutions to arrive at the same desired behavior.
Here’s the previous example on unit testing a function to determine if
a given year is a leap year in 
<a href="https://github.com/lkloh/javascriptPlayground/blob/master/mochaTestExample_aug2_2017/test_bdd.js">BDD style</a>.</p>

<p>Oh and since <code class="highlighter-rouge">describe</code> and <code class="highlighter-rouge">context</code> are aliases for each other,
if you use several layers of nesting,
it is considered good style to use <code class="highlighter-rouge">describe</code> for the outermost layer
and <code class="highlighter-rouge">context</code> for the inner one to seperate things more clearly.
Contrast <a href="https://github.com/lkloh/javascriptPlayground/blob/master/mochaTestExample_aug2_2017/test_good.js">using <code class="highlighter-rouge">describe</code> for everything</a> that is not a test,
and <a href="https://github.com/lkloh/javascriptPlayground/blob/master/mochaTestExample_aug2_2017/test_bdd.js">using both keywords</a> in nesting different sets of tests.</p>

<h2 id="tdd-test-driven-development">TDD (Test-driven development)</h2>

<p>General idea is to write the tests for expected behavior, 
then write the function that makes the tests pass.
Supposedly not as good as BDD because you
may be tempted to just get the tests to pass and be happy.
Doesn’t force you to optimize for conciseness and design
as much as BDD does.</p>

<h2 id="others">Others</h2>

<p>Haven’t really used the others yet, but you can read about them 
<a href="https://mochajs.org/#exports">here</a>.
Seems like they would be fine for either BDD or TDD,
you can chose one or another based on syntax/compilation preferences.</p>

  </div>

  <h1><a href="/2017/08/02/unit-testing-mocha.html">Describing mocha tests properly</a></h1>
  <p class="author">
    <span class="date">2017-08-02 01:57:45 -0700</span>
  </p>
  <div class="content">
    <p>There’s more <a href="http://samwize.com/2014/02/08/a-guide-to-mochas-describe-it-and-setup-hooks/">here</a> 
on how to write good tests and set them up,
so I tried implementing them in practice on an example function.
The entire repo of tests described in this article is 
<a href="https://github.com/lkloh/javascriptPlayground/tree/master/mochaTestExample_aug2_2017">here</a>.</p>

<p>Given this javascript function to test:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">isLeapYear</span><span class="err">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">year</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="nb">Number</span><span class="p">.</span><span class="nx">isInteger</span><span class="p">(</span><span class="nx">year</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">year</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">))</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="nx">year</span> <span class="o">%</span> <span class="mi">4</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="nx">year</span> <span class="o">%</span> <span class="mi">100</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="nx">year</span> <span class="o">%</span> <span class="mi">400</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
					<span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
				<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
					<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
			<span class="p">}</span> 
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="k">throw</span> <span class="s1">'Year must be an integer &gt;= 0'</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<p>Good tests are descriptive english of what you expect the function to do:</p>
<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">assert</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'assert'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">typesOfYears</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'./typesOfYears'</span><span class="p">);</span>

<span class="nx">describe</span><span class="p">(</span><span class="s1">'isLeapYear'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">describe</span><span class="p">(</span><span class="s1">'for years divisible by 4'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
	  	<span class="nx">it</span><span class="p">(</span><span class="s1">'should return "true" when the year is not multiple of 100'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		  	<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">typesOfYears</span><span class="p">.</span><span class="nx">isLeapYear</span><span class="p">(</span><span class="mi">1996</span><span class="p">),</span> <span class="kc">true</span><span class="p">);</span>
		<span class="p">});</span>

		<span class="nx">it</span><span class="p">(</span><span class="s1">'should return "false" when the year is a multiple of 100, and not a multiple of 400'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		  	<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">typesOfYears</span><span class="p">.</span><span class="nx">isLeapYear</span><span class="p">(</span><span class="mi">1900</span><span class="p">),</span> <span class="kc">false</span><span class="p">);</span>
		<span class="p">});</span>

		<span class="nx">it</span><span class="p">(</span><span class="s1">'should return "true" when the year is a multiple of 400'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		  	<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">typesOfYears</span><span class="p">.</span><span class="nx">isLeapYear</span><span class="p">(</span><span class="mi">2000</span><span class="p">),</span> <span class="kc">true</span><span class="p">);</span>
		<span class="p">});</span>
	<span class="p">});</span>

	<span class="nx">describe</span><span class="p">(</span><span class="s1">'for years not divisible by 4'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
	  	<span class="nx">it</span><span class="p">(</span><span class="s1">'should return "false" when the year is not multiple of 100'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		  	<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">typesOfYears</span><span class="p">.</span><span class="nx">isLeapYear</span><span class="p">(</span><span class="mi">2001</span><span class="p">),</span> <span class="kc">false</span><span class="p">);</span>
		<span class="p">});</span>
	<span class="p">});</span>
<span class="p">});</span>
</code></pre>
</div>

<p>while bad tests focus too much on implementation details.</p>
<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">assert</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'assert'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">typesOfYears</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'./typesOfYears'</span><span class="p">);</span>

<span class="nx">describe</span><span class="p">(</span><span class="s1">'isLeapYear'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">it</span><span class="p">(</span><span class="s1">'(year % 4 == 0) and (year % 100 != 0) ==&gt; false'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
	  	<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">typesOfYears</span><span class="p">.</span><span class="nx">isLeapYear</span><span class="p">(</span><span class="mi">1996</span><span class="p">),</span> <span class="kc">true</span><span class="p">);</span>
	<span class="p">});</span>

	<span class="nx">it</span><span class="p">(</span><span class="s1">'(year % 400 != 0) ==&gt; false'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
	  	<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">typesOfYears</span><span class="p">.</span><span class="nx">isLeapYear</span><span class="p">(</span><span class="mi">1900</span><span class="p">),</span> <span class="kc">false</span><span class="p">);</span>
	<span class="p">});</span>

	<span class="nx">it</span><span class="p">(</span><span class="s1">'(year % 400 == 0) ==&gt; true'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
	  	<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">typesOfYears</span><span class="p">.</span><span class="nx">isLeapYear</span><span class="p">(</span><span class="mi">2000</span><span class="p">),</span> <span class="kc">true</span><span class="p">);</span>
	<span class="p">});</span>

	<span class="nx">it</span><span class="p">(</span><span class="s1">'(year % 4 != 0) ==&gt; false'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">typesOfYears</span><span class="p">.</span><span class="nx">isLeapYear</span><span class="p">(</span><span class="mi">2001</span><span class="p">),</span> <span class="kc">false</span><span class="p">);</span>		
	<span class="p">});</span>
<span class="p">});</span>
</code></pre>
</div>

<p>Its awfully easy to write bad tests that describe how the function is implemented,
because I’ve already written it once by the time I’ve got there.
Something to be careful about for the future.</p>


  </div>

  <h1><a href="/2017/08/01/chaining-booleans.html">Generic libraries that check whether a value is truthy are useless</a></h1>
  <p class="author">
    <span class="date">2017-08-01 01:57:45 -0700</span>
  </p>
  <div class="content">
    <p>Python’s <a href="https://docs.python.org/2/library/operator.html">operator library</a>
is useful when you want to pass in regular arithmetic operators
as an argument to another function.
I recently had to use it.</p>

<p>In the process, I discovered there’s a handy function called as
<code class="highlighter-rouge">operator.truth(obj)</code> which takes in an object 
and returns <code class="highlighter-rouge">True</code> if the object is <code class="highlighter-rouge">True</code>, and <code class="highlighter-rouge">False</code> otherwise.
Meaning that <code class="highlighter-rouge">operator.truth(None) = False</code>, which is handy.</p>

<p>It would be handy if we could use it to 
verify that a variable which is supposed to hold an integers
is actually doing so, and isn’t something like <code class="highlighter-rouge">1/0</code>, for instance.</p>

<p>Unfortunately, we have:</p>
<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">operator</span>

<span class="n">not_an_integer</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s">'nan'</span><span class="p">)</span>
<span class="n">operator</span><span class="o">.</span><span class="n">truth</span><span class="p">(</span><span class="n">not_an_integer</span><span class="p">)</span> <span class="o">=</span> <span class="bp">True</span>
</code></pre>
</div>

<p>So not so helpful. There’s lots of libraries to check whether
something is truthy lying around, but their edge cases differ in subtle ways
and you end up needing to implement it again.</p>

<p>One place where this could come in useful is when
we have a variable <code class="highlighter-rouge">x</code> to handle where <code class="highlighter-rouge">x</code> could be <code class="highlighter-rouge">None</code>, or
a valid value, such as a non-empty string.
Unfortunately, we could just as easily check whether <code class="highlighter-rouge">x is None</code> or not.
It’s just easier this way.</p>

<p>I tried coding up <a href="https://github.com/lkloh/playground-for-python/blob/master/operator_library.py">an example</a> using <code class="highlighter-rouge">operator.truth</code> to check for null values,
and it didn’t work.
I still needed a specific case where I exlicitly checked 
whether a value was <code class="highlighter-rouge">None</code> or a <code class="highlighter-rouge">boolean</code>.</p>

<p>This example is simple:
create a dictionary with some fields describing a person,
and pass it into a function to transform all non-null fields of the dictionary into a string.
We use booleans to represent the gender of the person:
<code class="highlighter-rouge">True</code> for male and <code class="highlighter-rouge">False</code> for female,
I couldn’t use <code class="highlighter-rouge">operator.truth</code> to test whether the value of the person’s
gender was recorded, or it would cause problems as
<code class="highlighter-rouge">operator.truth(None) = False</code> and <code class="highlighter-rouge">operator.truth(False) = False</code>.
So if the gender is <code class="highlighter-rouge">False</code>,
then we want to transform the new dictionary’s value to <code class="highlighter-rouge">female</code>,
but this would not get processed.</p>

<p>Of course, this could be solved with refactoring in the example provided,
but if I refactored everything I didn’t like, I’ll never get anything done.</p>


  </div>

  <h1><a href="/python,/coding/style/2017/07/28/python-inlining.html">Python inlining</a></h1>
  <p class="author">
    <span class="date">2017-07-28 01:57:45 -0700</span>
  </p>
  <div class="content">
    <p>Python inlining makes code more readable. 
Especially code read by many people for a complex application.</p>

<p>Therefore a function like</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">return_even_numbers_only</span><span class="p">(</span><span class="n">arr_of_nums</span><span class="p">):</span>
	<span class="n">even_numbers</span> <span class="o">=</span> <span class="p">[]</span>
	<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">arr_of_nums</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
			<span class="n">even_numbers</span> <span class="o">+=</span> <span class="p">[</span><span class="n">n</span><span class="p">]</span>
	<span class="k">return</span> <span class="n">even_numbers</span>
</code></pre>
</div>

<p>should be refactored to</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">return_even_numbers_only</span><span class="p">(</span><span class="n">arr_of_nums</span><span class="p">):</span>
	<span class="k">return</span> <span class="p">[</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">arr_of_nums</span> <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span>
</code></pre>
</div>

<p>Similarly, if-else statements should be inlined if possible.</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">is_even</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
	<span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
		<span class="k">return</span> <span class="bp">True</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="k">return</span> <span class="bp">False</span>
</code></pre>
</div>

<p>should be refactored to</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">is_even</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
	<span class="k">return</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="k">return</span> <span class="bp">False</span>
</code></pre>
</div>

<p>Also, even for larger blocks of code, use fewer conditionals if possible.</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">get_fibonacci_number</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
	<span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
		<span class="k">return</span> <span class="mi">1</span>
	<span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
		<span class="k">return</span> <span class="mi">1</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">get_fibonacci_number</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">get_fibonacci_number</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span>
</code></pre>
</div>

<p>could be rewritten as</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">get_fibonacci_number</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
	<span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
		<span class="k">return</span> <span class="mi">1</span>
	<span class="k">return</span> <span class="n">get_fibonacci_number</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">get_fibonacci_number</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span>
</code></pre>
</div>


  </div>

  <h1><a href="/2017/07/22/javascript-comparisons.html">Javascript: Use === and !==</a></h1>
  <p class="author">
    <span class="date">2017-07-22 11:05:37 -0700</span>
  </p>
  <div class="content">
    <p>Javascript has three ways to 
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness">establish equality</a>,
two of which are well known:</p>

<h2 id="a--b">A == B</h2>

<p>The best known, because it is used in lost of other languages.
Doesn’t work well for JavaScript because it
converts A and B to a common type, then compares them.
Meaning that these are all true:</p>
<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="mi">0</span> <span class="o">==</span> <span class="err">`</span><span class="mi">0</span><span class="err">`</span>
<span class="mi">0</span> <span class="o">==</span> <span class="mi">0</span>
<span class="kc">null</span> <span class="o">==</span> <span class="kc">undefined</span>
</code></pre>
</div>

<p>Since NaN represents the solution to an ill-behaved math problem (e.g. 1/0),
thus <code class="highlighter-rouge">NaN === NaN</code> returns false.</p>

<h2 id="a--b-1">A === B</h2>

<p>Compares objects A and B for strict equality.
Meaning for <code class="highlighter-rouge">true</code> to be emitted, the objects must be of the same type,
and also be the same. Thus these are false:</p>
<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="err">`</span><span class="mi">0</span><span class="err">`</span> <span class="o">===</span> <span class="mi">0</span>
<span class="kc">null</span> <span class="o">===</span> <span class="kc">undefined</span>
</code></pre>
</div>

<p>and only this is true:</p>
<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="mi">0</span> <span class="o">===</span> <span class="mi">0</span>
</code></pre>
</div>

<p>It’s considered good practice to use <code class="highlighter-rouge">===</code> equality, because:</p>
<ol>
  <li>Easier to predict the result of <code class="highlighter-rouge">A === B</code></li>
  <li>No type conversion is made, so faster evaluation</li>
</ol>

<h2 id="objectisa-b">Object.is(A, B)</h2>

<p>Almost the same behavior as <code class="highlighter-rouge">A === B</code>, except that <code class="highlighter-rouge">Object.is(NaN, NaN)</code> is true.</p>

<p>Generally use <code class="highlighter-rouge">A === B</code> instead of <code class="highlighter-rouge">Object.is(A, B)</code> as it the syntax that other
people would recognize and expect.</p>

<p>The only time you should use <code class="highlighter-rouge">Object.is</code> is if you want to mimic the way <code class="highlighter-rouge">Object.defineProperty()</code>
works for some reason, or when you want <code class="highlighter-rouge">Object.is(-0, +0)</code> to be false.</p>


  </div>

  <h1><a href="/2017/07/21/get-and-post-formatting.html">Get and Post formatting in Javascript</a></h1>
  <p class="author">
    <span class="date">2017-07-21 11:05:37 -0700</span>
  </p>
  <div class="content">
    <h2 id="get">Get</h2>

<p>Used for viewing data, all required data passed in the URL. Meaning that when sending parameters over, the URL in the request should look something like <code class="highlighter-rouge">http://example.com?name=jane&amp;age=21</code></p>

<h2 id="post">Post</h2>

<p>Used for altering data.
Additional data is sent in the body of the http request.
Since you should use JSON (language agnostic format) to send stuff over the network,
	and if your body is a Javascript object like
	<code class="highlighter-rouge">js
	const params = {
		name = `Jane`,
		age = 21,
	};
	</code>
	you’ll need to call <code class="highlighter-rouge">JSON.stringify(params)</code> to
	pass this over in the body of the post request.</p>


  </div>

  <h1><a href="/2017/07/20/saucelabs.html">Sauce Labs</a></h1>
  <p class="author">
    <span class="date">2017-07-20 04:42:23 -0700</span>
  </p>
  <div class="content">
    <p><a href="https://www.ministryoftesting.com/2013/06/a-look-inside-saucelabs/">Sauce Labs</a>
allows automated tests to be run in the cloud.
In particular, they allow for the tests to be run in
many combinations of OS/browser.
If you’ve ever had to test a webapp on just Chrome and Firefox, 
you’ll know just how valuable this is.
They do that by running users’ tests on their VMs.</p>

<h2 id="latency-over-a-network">Latency over a network</h2>

<p>Sometime SauceLabs users write tests with local dependencies,
which can cause issues with “works on my laptop, not in the cloud”.
For example, if someone wrote such a test:</p>
<div class="language-py highlighter-rouge"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">def</span> <span class="nf">test_waited_5_seconds</span><span class="p">():</span>
	<span class="n">timenow</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
	<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
	<span class="n">timelater</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
	<span class="k">assert</span> <span class="p">(</span><span class="n">timelater</span> <span class="o">-</span> <span class="n">timenow</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">==</span> <span class="mi">5</span>
</code></pre>
</div>

<p>Doing stuff over a network like the internet has
all sorts of latency issues to consider.
Its possible that <code class="highlighter-rouge">timelater - timenow</code> is more than 5 seconds
when run in the cloud.</p>

<h2 id="solving-the-latency-problem">Solving the latency problem</h2>

<p>According to <a href="https://saucelabs.com/blog/how-to-lose-races-and-win-at-selenium">Sauce Labs</a>,
many Selenium tests fail because websites are designed to be used by a human being,
who needs time to respond to anything that happens.
Selenium can respond to changes much faster than any human can.
Since many websites use lazy loading (loading on demand),
Selenium sometimes tries to interact with page elements that have not been loaded yet.</p>

<p>So when testing with Selenium,
it is a good idea to <code class="highlighter-rouge">assert</code> that an element is loaded,
before asserting something else,
For example, make sure the <code class="highlighter-rouge">submit</code> button on a form is loaded,
before clicking on it to verify
that it takes you to the <code class="highlighter-rouge">confirm sign up for mailing list</code> page.</p>

<p>The way to verify the element is loaded
is to try a few times to check that it is loaded, before failing. 
Something like</p>
<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">def</span> <span class="nx">test_submit_form</span><span class="p">(</span><span class="nx">self</span><span class="p">)</span><span class="err">:</span>
	<span class="nx">submit_button</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">spin_assert</span><span class="p">(</span><span class="s1">'#submit_credentials'</span><span class="p">)</span>
	<span class="nx">submit_button</span><span class="p">.</span><span class="nx">click</span><span class="p">()</span>
	<span class="nx">url</span> <span class="o">=</span> <span class="nx">driver</span><span class="p">.</span><span class="nx">getCurrentUrl</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">driver</span><span class="p">);</span>
	<span class="nx">assert</span> <span class="nx">urlparse</span><span class="p">.</span><span class="nx">urlparse</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="o">==</span> <span class="s1">'/successful_submit.html'</span>

<span class="nx">def</span> <span class="nx">spin_assert</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">css_selector</span><span class="p">)</span><span class="err">:</span>
	<span class="k">for</span> <span class="nx">_</span> <span class="k">in</span> <span class="nx">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="err">:</span>
		<span class="nl">try</span><span class="p">:</span>
			<span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">driver</span><span class="p">.</span><span class="nx">find_element_by_css_selector</span><span class="p">(</span><span class="nx">css_selector</span><span class="p">)</span>
		<span class="nx">except</span> <span class="nx">NoSuchElementException</span><span class="err">:</span>
			<span class="nx">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
	<span class="nx">raise</span> <span class="s1">'Element with selector not found'</span> <span class="o">%</span> <span class="nx">css_selector</span>
</code></pre>
</div>


  </div>

  <h1><a href="/2017/07/19/jenkins.html">Jenkins</a></h1>
  <p class="author">
    <span class="date">2017-07-19 04:42:23 -0700</span>
  </p>
  <div class="content">
    <p>Jenkins is an automation serve that supports building, testing,
deploying for most projects. 
It can be used just to run tests on a project,
or also to deploy it.</p>

<p>The main product is <a href="https://jenkins.io/doc/pipeline/tour/hello-world/">Jenkins Pipeline</a>.
which automatically delivers software to users as it is being developed. 
The pipeline is written in a <code class="highlighter-rouge">Jenkinsfile</code> in the source code’s repo.</p>

<p>There are several possibilities to use in Pipeline to deploy code,
but Docker images is the most common,
as they allow the environment and dependencies to be automatically deployed.</p>

  </div>

  <h1><a href="/2017/07/18/docker.html">Docker</a></h1>
  <p class="author">
    <span class="date">2017-07-18 04:42:23 -0700</span>
  </p>
  <div class="content">
    <p><a href="https://www.docker.com/what-docker">Docker</a> 
calls itself a containers as a service platform.
The point of having Docker is to avoid software dependency hell
when there are lots of people with different machines
who are working on the same codebase.</p>

<p>Instead, the sysadmin can package the software needed to develop the code
such that if can run isolated.
This may make you think of VMs,
but a VM is essentially an entire operating system
running on top of another.
A container is not the entire operating system,
but only the minimum needed to get code to run.</p>

<p>So essentially,
docker saves devs from setting up a new environment
everytime a new hire comes in/ 
someone accidentally installed a virus on their laptop.</p>

<p>You could say that Docker allows for many stripped-down VMs
to be run on a shared operating system.
This <a href="https://stackoverflow.com/questions/28089344/docker-what-is-it-and-what-is-the-purpose">Stack Overflow post</a> 
has a nice summary.</p>

  </div>

  <h1><a href="/2017/07/17/deploy-on-real-weekdays-only.html">Deploy during the real workweek</a></h1>
  <p class="author">
    <span class="date">2017-07-17 04:42:23 -0700</span>
  </p>
  <div class="content">
    <p>Everyone knows the Friday is a holiday,
and thus you should only ship code when <a href="https://stackoverflow.com/questions/2115612/why-not-to-deploy-on-a-friday">everyone else is at work</a>.</p>

<p>This Stack Overflow post lists the reasons to ship when everyone is at work:</p>
<ul>
  <li>So you that you can clean up any bugs missed before deployment,
  which happens pretty often.</li>
  <li>So that users will check their work emails if you are changing 
  a tool they use for their own work.
  If you ship new code on a holiday,
  and they don’t check their email over the holiday,
  they may get a surprise when they see the change,
  which may not always be welcome.</li>
  <li>New releases always have bugs.
  You want to have coworkers around you to help fix the bugs
  when they expect to be at work, 
  not bother them when they are on holiday.</li>
</ul>

<h2 id="gotchas">Gotchas:</h2>

<p>You should ship on a Friday if you work for a dating app company.</p>

  </div>


<!-- Pagination links -->
<div class="pagination">
  
    <a href="/blog/page3/" class="previous">Previous</a>
  
  <span class="page_number ">Page: 4 of 6</span>
  
    <a href="/blog/page5/" class="next">Next</a>
  
</div>
      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Things I Should Know</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>
            
              LK Loh
            
            </li>
            
            <li><a href="mailto:lkloh2410@gmail.com">lkloh2410@gmail.com</a></li>
            
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/lkloh"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">lkloh</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/lkloh1024"><span class="icon icon--twitter"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">lkloh1024</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>but somehow only just learnt</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
